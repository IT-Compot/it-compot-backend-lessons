# ÐšÐ¸Ð½Ð¾Ð¿Ð¾Ð¸ÑÐº. Ð”Ð¾Ð´ÐµÐ»Ñ‹Ð²Ð°ÐµÐ¼ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ñ‹

> ðŸ§  **ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹ Ð´Ð»Ñ Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»Ñ:** Ð¡ÐµÐ¹Ñ‡Ð°Ñ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ Ð²Ð°Ð¶Ð½Ð¾ Ð¾Ð±ÑŠÑÑÐ½ÑÑ‚ÑŒ **Ð·Ð°Ñ‡ÐµÐ¼** Ð¼Ñ‹ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‘Ð¼ Ñ‚Ðµ Ð¸Ð»Ð¸ Ð¸Ð½Ñ‹Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð² ÑˆÐ°Ð±Ð»Ð¾Ð½Ñ‹. Ð•ÑÐ»Ð¸ ÑƒÑ‡ÐµÐ½Ð¸Ðº Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ Ð·Ð° Ð²Ð°Ð¼Ð¸ ÐºÐ¾Ð´ â€” Ð¾Ð½ Ð·Ð°Ð±ÑƒÐ´ÐµÑ‚ ÐµÐ³Ð¾ Ñ‡ÐµÑ€ÐµÐ· 10 Ð¼Ð¸Ð½ÑƒÑ‚. Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð¹Ð¼Ñ‘Ñ‚, Ð¿Ð¾Ñ‡ÐµÐ¼Ñƒ Ð¸ ÐºÐ°Ðº Ð¾Ð½ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ â€” Ð¾ÑÑ‚Ð°Ð½ÐµÑ‚ÑÑ Ð½Ð°Ð´Ð¾Ð»Ð³Ð¾.

ÐÐ° ÑÑ‚Ð¾Ð¼ ÑƒÑ€Ð¾ÐºÐµ Ð¼Ñ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð´Ð¾Ð´ÐµÐ»Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ñ‹ Ñ‚Ð°Ðº, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð½Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°Ð²Ð°Ð»Ð¸ Ð²Ð½ÑƒÑ‚Ñ€ÑŒ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¾Ð² Ð½ÑƒÐ¶Ð½Ñ‹Ðµ Ð½Ð°Ð¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ.

ÐŸÐ¾Ñ…Ð¾Ð¶Ð¸Ñ… ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ð¾Ð² Ð¼Ð½Ð¾Ð³Ð¾, Ð° Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ñƒ ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ¾Ð² Ð±ÑƒÐ´ÐµÑ‚ Ð¼Ð½Ð¾Ð³Ð¾ Ð»Ð¸Ñ‡Ð½Ð¾Ð¹ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ¸.

---

## 1. ÐšÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ñ‹

> ðŸ“š **ÐœÐµÑ‚Ð¾Ð´Ð¸ÐºÐ°:** ÐžÐ±ÑÑƒÐ¶Ð´Ð°Ð¹Ñ‚Ðµ Ñ ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ°Ð¼Ð¸, Ñ‡Ñ‚Ð¾ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‚ÑŒ Ð² ÑˆÐ°Ð±Ð»Ð¾Ð½. ÐÐµ Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ ÑÑ€Ð°Ð·Ñƒ ÐºÐ¾Ð´ â€” Ð·Ð°Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹:
- Ð§Ñ‚Ð¾ Ð½ÑƒÐ¶Ð½Ð¾ Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸?
- Ð“Ð´Ðµ ÑÑ‚Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð»ÐµÐ¶Ð°Ñ‚?
- ÐšÐ°Ðº Ð¸Ñ… Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· ORM?

ÐŸÐ°Ñ€Ð°Ð»Ð»ÐµÐ»ÑŒÐ½Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾Ð³Ð»ÑÐ´Ñ‹Ð²Ð°Ñ‚ÑŒ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» **[ORM](https://github.com/xlartas/it-compot-backend-methods/blob/main/django-base.md#orm)** Ð² ÑˆÐ¿Ð°Ñ€Ð³Ð°Ð»ÐºÐµ.

```python
from django.shortcuts import render, get_object_or_404
from .models import Movie, MoviePerson, Genre

def main(request):  # Ð¡Ð°Ð¼Ð¸
    # ðŸ’¬ ÐŸÐ¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‘Ð¼. ÐŸÐ¾Ð·Ð¶Ðµ ÑÑŽÐ´Ð° Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸ "Ð›ÑƒÑ‡ÑˆÐ¸Ðµ Ñ„Ð¸Ð»ÑŒÐ¼Ñ‹" Ð¸Ð»Ð¸ "ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ".
    return render(request, 'kinopoisk/main.html')

def movie_list(request):  # Ð¡Ð°Ð¼Ð¸
    # ðŸŽ¬ ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð²ÑÐµ Ñ„Ð¸Ð»ÑŒÐ¼Ñ‹. Ð­Ñ‚Ð¾ ÑÐ¿Ð¸ÑÐ¾Ðº, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð·Ð¸Ñ‚ÑÑ Ð² ÑˆÐ°Ð±Ð»Ð¾Ð½Ðµ "Ð²ÑÐµ Ñ„Ð¸Ð»ÑŒÐ¼Ñ‹".
    movies = Movie.objects.all()
    return render(request, 'kinopoisk/movie_list.html', {
        'movies': movies
    })

def actor_list(request):  # ÐŸÐ¾Ð´ÑÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼
    # ðŸ‘¨â€ðŸŽ¤ Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð²ÑÐµÑ… Ð»ÑŽÐ´ÐµÐ¹ Ð¿Ð¾ Ñ€Ð¾Ð»Ð¸ "Ð°ÐºÑ‚Ñ‘Ñ€".
    actors = MoviePerson.objects.filter(role=MoviePerson.RoleType.ACTOR)
    return render(request, 'kinopoisk/person_list.html', {
        'persons': actors,  # ðŸ‘ˆ Ð² ÑˆÐ°Ð±Ð»Ð¾Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚ ÑÐ¿Ð¸ÑÐ¾Ðº Ð»ÑŽÐ´ÐµÐ¹-Ð°ÐºÑ‚Ñ‘Ñ€Ð¾Ð²
        'title': 'ÐÐºÑ‚Ñ‘Ñ€Ñ‹'   # ðŸ‘ˆ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐµ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹
    })

def director_list(request):  # Ð¡Ð°Ð¼Ð¸
    # ðŸŽ¬ Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ÑƒÐµÐ¼ Ð¿Ð¾ Ñ€Ð¾Ð»Ð¸ "Ñ€ÐµÐ¶Ð¸ÑÑÑ‘Ñ€"
    directors = MoviePerson.objects.filter(role=MoviePerson.RoleType.DIRECTOR)
    return render(request, 'kinopoisk/person_list.html', {
        'persons': directors,
        'title': 'Ð ÐµÐ¶Ð¸ÑÑÑ‘Ñ€Ñ‹'
    })

def genre_list(request):  # Ð¡Ð°Ð¼Ð¸
    # ðŸŽ­ ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð²ÑÐµ Ð¶Ð°Ð½Ñ€Ñ‹ Ð¸Ð· Ð±Ð°Ð·Ñ‹
    genres = Genre.objects.all()
    return render(request, 'kinopoisk/genre_list.html', {
        'genres': genres
    })

def movie_detail(request, movie_id):  # Ð¡Ð°Ð¼Ð¸
    # ðŸ“½ ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð¾Ð´Ð¸Ð½ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ Ñ„Ð¸Ð»ÑŒÐ¼ Ð¿Ð¾ ID
    movie = Movie.objects.get(id=movie_id)
    return render(request, 'kinopoisk/movie_detail.html', {
        'movie': movie
    })

def actor_detail(request, actor_id):  # ÐÐ°Ð¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾ related_name
    # ðŸ‘¤ ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð°ÐºÑ‚Ñ‘Ñ€Ð° Ð¿Ð¾ ID
    actor = MoviePerson.objects.get(id=actor_id)
    # ðŸŽ¥ Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ related_name='acted_in_movies' â€” Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ð²ÑÐµ Ñ„Ð¸Ð»ÑŒÐ¼Ñ‹ Ñ ÑÑ‚Ð¸Ð¼ Ð°ÐºÑ‚Ñ‘Ñ€Ð¾Ð¼
    movies = actor.acted_in_movies.all()
    return render(request, 'kinopoisk/person_detail.html', {
        'person': actor,
        'movies': movies
    })

def director_detail(request, director_id):  # Ð¡Ð°Ð¼Ð¸
    director = MoviePerson.objects.get(id=director_id)
    movies = director.directed_movies.all()  # ðŸŽ¯ related_name='directed_movies'
    return render(request, 'kinopoisk/person_detail.html', {
        'person': director,
        'movies': movies
    })

def genre_detail(request, genre_id):  # Ð¡Ð°Ð¼Ð¸
    genre = Genre.objects.get(id=genre_id)
    movies = genre.movies.all()  # ðŸ“š related_name='movies' Ð¸Ð· Ð¿Ð¾Ð»Ñ Ð² Movie: genres = ManyToManyField(..., related_name='movies')
    return render(request, 'kinopoisk/genre_detail.html', {
        'genre': genre,
        'movies': movies
    })
```

---

## ÐœÐµÑÑ‚Ð¾ Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð½Ð° Ð³Ð¸Ñ‚ Ð¸Ð»Ð¸ Ð´Ð»Ñ Ð´Ð¾Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ñ‡Ñ‚Ð¾-Ð»Ð¸Ð±Ð¾

> ðŸ’¾ **GitHub:** Ð¡Ð°Ð¼Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð·Ð°ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ. ÐŸÐ¾ÐºÐ°Ð¶Ð¸Ñ‚Ðµ, ÐºÐ°Ðº Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð¾ÑÐ¼Ñ‹ÑÐ»ÐµÐ½Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ñ‹ â€” `git commit -m "Ð´Ð¾Ð±Ð°Ð²Ð¸Ð» ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ñ‹"` Ð»ÑƒÑ‡ÑˆÐµ, Ñ‡ÐµÐ¼ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ `update`.

---

## ÐŸÐ¾Ð´Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¸Ñ‚Ð¾Ð³Ð¸

âœ… Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ Ð¼Ñ‹:
- ÐÐ°Ð¿Ð¸ÑÐ°Ð»Ð¸ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ñ‹ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¾Ð²
- ÐžÐ±ÑŠÑÑÐ½Ð¸Ð»Ð¸ Ð»Ð¾Ð³Ð¸ÐºÑƒ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð² ÑˆÐ°Ð±Ð»Ð¾Ð½Ñ‹
- Ð’ÑÐ¿Ð¾Ð¼Ð½Ð¸Ð»Ð¸ `related_name` Ð¸ ÐºÐ°Ðº Ñ‡ÐµÑ€ÐµÐ· Ð½ÐµÐ³Ð¾ Ð¾Ð±Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒÑÑ Ðº ÑÐ²ÑÐ·Ð°Ð½Ð½Ñ‹Ð¼ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°Ð¼

> â›µ Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ ÑƒÑ‡ÐµÐ½Ð¸ÐºÐ¸ Ð¿Ð¾Ð½ÑÐ»Ð¸: **ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€** â€” ÑÑ‚Ð¾ Ð¼Ð¾ÑÑ‚ Ð¼ÐµÐ¶Ð´Ñƒ Ð¼Ð¾Ð´ÐµÐ»ÑŒÑŽ Ð¸ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¾Ð¼. ÐžÐ½ Ð²Ñ‹Ñ‚Ð°ÑÐºÐ¸Ð²Ð°ÐµÑ‚ Ð½ÑƒÐ¶Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¸Ñ… Ð² HTML.

># git push...

